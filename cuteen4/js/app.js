"use strict";function hasClass(obj,cls){return obj.className.match(new RegExp("(\\s|^)"+cls+"(\\s|$)"))}function addClass(obj,cls){hasClass(obj,cls)||(obj.className+=""+cls)}function removeClass(obj,cls){if(hasClass(obj,cls)){var reg=new RegExp("(\\s|^)"+cls+"(\\s|$)");obj.className=obj.className.replace(reg,"")}}function toggleClass(obj,cls){hasClass(obj,cls)?removeClass(obj,cls):addClass(obj,cls)}const Cuteen={initTheme:function(){if(new LazyLoad({}),[].slice.call(document.querySelectorAll('[data-toggle="tooltip"]')).map(function(tooltipTriggerEl){return new bootstrap.Tooltip(tooltipTriggerEl)}),window.matchMedia("(min-width: 768px)").matches){const dropdown=document.getElementsByClassName("dropdown"),dropdownToggle=document.getElementsByClassName("dropdown-toggle"),dropdownMenu=document.getElementsByClassName("dropdown-menu");for(let i=0;i<dropdown.length;i++)dropdown[i].onmouseover=function(){dropdownToggle[i].setAttribute("aria-expanded","true"),dropdownToggle[i].classList.add("show"),dropdownMenu[i].classList.add("show")},dropdown[i].onmouseout=function(){dropdownToggle[i].setAttribute("aria-expanded","false"),dropdownToggle[i].classList.remove("show"),dropdownMenu[i].classList.remove("show")}}if("yes"===Config.NavBarHeadroom){const element=document.getElementById("navPC");new Headroom(element,{offset:150}).init()}},mobileAside:function(){const attr=document.getElementById("mobileMenu"),side=document.getElementById("mobileAside");attr.onclick=function(){"false"===side.getAttribute("mobile-open")?side.setAttribute("mobile-open","true"):side.setAttribute("mobile-open","false")}},mobileMusicToggle:function(){const musicPop=document.getElementById("mobileMusic"),box=document.getElementById("musicMobileBox");console.log(musicPop),null!==musicPop&&(musicPop.onclick=function(){"on"===box.className?(box.classList.remove("on"),Cuteen.maskOff()):(box.classList.add("on"),Cuteen.maskOn())})},stopPropagation:function(e){(e=e||window.event).stopPropagation?e.stopPropagation():e.cancelBubble=!0},maskOff:function(){document.getElementById("mask").setAttribute("data-mask","close")},maskOn:function(){document.getElementById("mask").setAttribute("data-mask","open")},bodyClose:function(){document.getElementById("mask");document.getElementById("mobileAside").setAttribute("mobile-open","false")},navBar:function(){if("yes"===Config.topImage){let b=document.documentElement.scrollTop||document.body.scrollTop,d=document.getElementById("navPC"),e=document.getElementById("navMobile");b>120?(d.classList.add("bg-blur"),d.classList.remove("bg-transparent","has-img"),e.classList.add("bg-blur"),e.classList.remove("bg-transparent","has-img")):(d.classList.add("bg-transparent","has-img"),d.classList.remove("bg-blur"),e.classList.add("bg-transparent","has-img"),e.classList.remove("bg-blur"))}},backTop:function(){window.scroll({top:0,left:0,behavior:"smooth"})},randomString:function(len){len=len||32;let chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",res="";for(let i=0;i<len;i++)res+=chars.charAt(Math.floor(Math.random()*chars.length));return res},getCodeFromBlock:function(block){var codeOfBlocks={};if(void 0!==codeOfBlocks[block.id])return codeOfBlocks[block.id];let lines=block.getElementsByClassName("hljs-ln-code"),res="";for(let i=0;i<lines.length-1;i++)res+=lines[i].innerText,res+="\n";return res+=lines[lines.length-1].innerText,codeOfBlocks[block.id]=res,res},codeLight:function(){"undefined"!=typeof hljs&&(document.querySelectorAll("pre code").forEach(block=>{hljs.highlightBlock(block)}),document.querySelectorAll("code.hljs").forEach(block=>{let copyBtnID="copy_btn_"+Cuteen.randomString();hljs.lineNumbersBlock(block,{singleLine:!0});const el=block.parentNode;el.classList.add("hljs-codeblock"),block.insertAdjacentHTML("afterend",'\n<div class="hljs-control hljs-title">\n\t\t\t<div type="button" data-toggle="tooltip" data-placement="bottom" data-original-title="折行" class="hljs-control-toggle-break-line">\n\t\t\t\t\t\t<svg class="icon" aria-hidden="true"><use xlink:href="#align-left"></use></svg>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div id='+copyBtnID+' type="button" data-toggle="tooltip" data-placement="bottom" data-original-title="复制" class="hljs-control-copy">\n\t\t\t\t\t\t<svg class="icon" aria-hidden="true"><use xlink:href="#copy"></use></svg>\n\t\t\t\t\t</div>\n\t\t\t\t</div>');let clipboard=new ClipboardJS("#"+copyBtnID,{text:function(trigger){return Cuteen.getCodeFromBlock(el)}});clipboard.on("success",function(e){Toastify({duration:1500,position:"center",text:'<svg class="icon icon-20" aria-hidden="true"><use xlink:href="#check-circle"></use></svg>复制成功!',backgroundColor:"var(--bs-success)",className:"info"}).showToast()}),clipboard.on("error",function(e){Toastify({duration:1500,position:"center",text:'<svg class="icon icon-20" aria-hidden="true"><use xlink:href="#x-circle"></use></svg>复制失败!',backgroundColor:"var(--bs-danger)",className:"info"}).showToast()})}))},ajaxComment:function(){const fm=document.getElementById("comment-form"),action=fm.getAttribute("data-action");console.log(action),fm.onsubmit=function(e){e.preventDefault();let fmData=new FormData(fm);axios.post(action,fmData).then(function(response){const convert=(new DOMParser).parseFromString(response.data,"text/html");if(new RegExp("Typecho_Widget_Exception").test(response.data))Toastify({duration:3e3,position:"center",text:'<svg class="icon icon-20" aria-hidden="true"><use xlink:href="#x-circle"></use></svg>评论失败!回传参数错误!',backgroundColor:"var(--bs-danger)",className:"info"}).showToast(),console.log(response.data);else{console.log("回复提交成功！"),document.getElementById("comment-textarea").value="",window.TypechoComment.cancelReply();const newIdNumber=response.data.match(/id=\"?comment-\d+/g).join().match(/\d+/g).sort(function(a,b){return a-b}).pop(),newId="comment-".concat(newIdNumber),oldList=document.getElementsByClassName("comment-list"),newList=convert.getElementsByClassName("comment-list")[0].outerHTML;console.log(oldList),oldList.length>0&&oldList[0].remove(),document.getElementById("comment-list").insertAdjacentHTML("afterbegin",newList),Toastify({duration:3e3,position:"center",text:'<svg class="icon icon-20" aria-hidden="true"><use xlink:href="#check-circle"></use></svg>评论成功!',backgroundColor:"var(--bs-success)",className:"info"}).showToast(),document.getElementById(newId).scrollIntoView({behavior:"smooth"})}}).catch(function(error){Toastify({duration:3e3,position:"center",text:'<svg class="icon icon-20" aria-hidden="true"><use xlink:href="#x-circle"></use></svg>评论失败!提交错误!',backgroundColor:"var(--bs-danger)",className:"info"}).showToast(),console.log(error)})}},upStar:function(){const like=document.getElementById("like");if(null!==like){let dataID=like.dataset.pid,num=document.getElementById("num"),starValue=Cookies.get("upstar");if(dataID===starValue)return like.classList.remove("btn-outline-primary"),like.classList.add("btn-primary"),Toastify({duration:3e3,position:"center",text:'<svg class="icon icon-20" aria-hidden="true"><use xlink:href="#check-circle"></use></svg>您已点过赞啦!',backgroundColor:"var(--bs-info)",className:"info"}).showToast(),"";axios.post(Config.homeUrl+"/action/cuteen?content",{cid:dataID}).then(function(response){return like.classList.remove("btn-outline-primary"),like.classList.add("btn-primary"),Cookies.set("upstar",dataID,{expires:7}),num.innerText++,Toastify({duration:3e3,position:"center",text:'<svg class="icon icon-20" aria-hidden="true"><use xlink:href="#check-circle"></use></svg>点赞成功！感谢支持~',backgroundColor:"var(--bs-success)",className:"info"}).showToast(),""}).catch(function(error){Toastify({duration:3e3,position:"center",text:'<svg class="icon icon-20" aria-hidden="true"><use xlink:href="#x-circle"></use></svg>点赞失败!提交错误!',backgroundColor:"var(--bs-danger)",className:"info"}).showToast(),console.log(error)})}return!1},enterSearch:function(item){13===event.which&&Cuteen.startSearch(item)},startSearch:function(item){const c=item.value;c&&""!==c?(document.getElementById("closeSearch").click(),setTimeout(function(){const t=Config.homeUrl+"/search/"+c;window.open(t,"_blank")},100)):item.setAttribute("placeholder","你还没有输入任何信息")},ajaxNext:function(){const link=document.getElementsByClassName("next")[0],href=link.getAttribute("href"),paras=document.getElementsByClassName("NextLoading");return document.getElementById("NextButton").remove(),link.onclick=function(e){return void 0!==href&&(axios.interceptors.request.use(config=>{if(null!==paras)for(;paras[0];)paras[0].remove();return link.insertAdjacentHTML("beforeend",'<button class="btn btn-primary col-3 mx-auto rounded-pill NextLoading" type="button" disabled>加载中...</button>'),config},error=>Promise.reject(error)),axios({url:href,method:"get"}).then(function(response){const convert=(new DOMParser).parseFromString(response.data,"text/html");if(!new RegExp("Typecho_Widget_Exception").test(response.data)){const list=convert.getElementsByClassName("article"),newhref=convert.getElementsByClassName("next")[0].getAttribute("href");let b="";for(let v of list)b+=v.outerHTML;if(null!==paras)for(;paras[0];)paras[0].remove();const insertPosition=document.getElementById("content");return insertPosition.getElementsByClassName("row").length>0?insertPosition.getElementsByClassName("row")[0].insertAdjacentHTML("beforeend",b):insertPosition.insertAdjacentHTML("beforeend",b),link.insertAdjacentHTML("beforeend",'<button id="NextButton" onclick="Cuteen.ajaxNext()" class="btn btn-primary col-3 mx-auto rounded-pill">点击加载更多</button>'),link.setAttribute("href",newhref),new LazyLoad({}).update(),!1}Toastify({duration:3e3,position:"center",text:'<svg class="icon icon-20" aria-hidden="true"><use xlink:href="#x-circle"></use></svg>加载失败!回传参数错误!',backgroundColor:"var(--bs-danger)",className:"info"}).showToast(),console.log(response.data)}).catch(function(error){Toastify({duration:3e3,position:"center",text:'<svg class="icon icon-20" aria-hidden="true"><use xlink:href="#x-circle"></use></svg>加载失败!参数错误',backgroundColor:"var(--bs-danger)",className:"info"}).showToast(),console.log(error)}),e.stopPropagation()),!1},!1},tocDisplay:function(){if(void 0!==document.getElementById("TOC-text")){const headerEl="h1,h2,h3,h4,h5,h6",content="#post";tocbot.init({tocSelector:"#TOC-text",contentSelector:content,headingSelector:headerEl,headingsOffset:70})}return!1},noCopy:function(){"yes"===Config.noConsole&&function(){var callbacks=[],timeLimit=50,open=!1;return setInterval(function(){var startTime=new Date;new Date-startTime>timeLimit?(open||callbacks.forEach(function(fn){fn.call(null)}),open=!0,window.stop(),alert("大佬别再扒了！赶紧买一份吧ヽ(￣ω￣(￣ω￣〃)ゝ"),document.body.innerHTML=""):open=!1},1),{addListener:function(fn){callbacks.push(fn)},cancleListenr:function(fn){callbacks=callbacks.filter(function(v){return v!==fn})}}}().addListener(function(){window.location.reload()})},InitOwO:function(){null!==document.getElementById("OwO")&&new OwO({logo:"OwO表情",container:document.getElementById("OwO"),target:document.getElementById("comment-textarea"),position:"down",width:"100%",maxHeight:"250px",api:Config.staticUrl+"emoji/emoji.json"})},darkMode:function(){const btn=document.getElementsByTagName("html")[0],svg=document.querySelector("#darkMode use"),svg2=document.querySelector("#mobileDarkMode use"),icon=svg.getAttribute("xlink:href");btn.insertAdjacentHTML("beforeend",'<div class="Cuteen_DarkSky">\n  <div class="Cuteen_DarkPlanet">\n  </div>\n</div>'),toggleClass(btn,"dark-mode");const sky=document.getElementsByClassName("Cuteen_DarkSky")[0];if(void 0!==sky){"0"===Cookies.get("DarkMode")?(Cookies.set("DarkMode",1,{expires:3}),console.log("夜间模式关闭")):(Cookies.set("DarkMode",0,{expires:3}),console.log("夜间模式开启")),setTimeout(function(){if(0!==sky.style.opacity)var num=10,st=setInterval(function(){num--,sky.style.opacity=num/10,num<=0&&(clearInterval(st),sky.remove())},30)},2e3)}"#moon"===icon?(svg.setAttribute("xlink:href","#sun"),svg2.setAttribute("xlink:href","#sun"),document.documentElement.style.setProperty("--bs-light","#121212"),document.documentElement.style.setProperty("--bs-dark","rgba(255, 255, 255, 0.8)")):(svg.setAttribute("xlink:href","#moon"),svg2.setAttribute("xlink:href","#moon"),document.documentElement.style.removeProperty("--bs-light"),document.documentElement.style.removeProperty("--bs-dark"))},darkModeCheck:function(){document.getElementsByTagName("html")[0];const svg=document.querySelector("#darkMode use"),svg2=document.querySelector("#mobileDarkMode use");return"2"===Config.darkSet?(svg.setAttribute("xlink:href","#sun"),svg2.setAttribute("xlink:href","#sun"),document.documentElement.style.setProperty("--bs-light","#121212"),document.documentElement.style.setProperty("--bs-dark","rgba(255, 255, 255, 0.8)"),document.documentElement.classList.add("dark-mode"),""):"1"===Config.darkSet?(svg.setAttribute("xlink:href","#moon"),svg2.setAttribute("xlink:href","#moon"),document.documentElement.style.removeProperty("--bs-light"),document.documentElement.style.removeProperty("--bs-dark"),document.documentElement.classList.remove("dark-mode"),""):"0"===Config.darkSet&&void 0===Cookies.get("DarkMode")?(new Date).getHours()>=20||(new Date).getHours()<6?(svg.setAttribute("xlink:href","#sun"),svg2.setAttribute("xlink:href","#sun"),document.documentElement.style.setProperty("--bs-light","#121212"),document.documentElement.style.setProperty("--bs-dark","rgba(255, 255, 255, 0.8)"),document.documentElement.classList.add("dark-mode"),console.log("夜间模式开启"),""):(svg.setAttribute("xlink:href","#moon"),svg2.setAttribute("xlink:href","#moon"),document.documentElement.style.removeProperty("--bs-light"),document.documentElement.style.removeProperty("--bs-dark"),document.documentElement.classList.remove("dark-mode"),console.log("夜间模式关闭"),""):"0"===Cookies.get("DarkMode")?(svg.setAttribute("xlink:href","#moon"),svg2.setAttribute("xlink:href","#moon"),document.documentElement.style.removeProperty("--bs-light"),document.documentElement.style.removeProperty("--bs-dark"),document.documentElement.classList.remove("dark-mode"),""):"1"===Cookies.get("DarkMode")?(svg.setAttribute("xlink:href","#sun"),svg2.setAttribute("xlink:href","#sun"),document.documentElement.style.setProperty("--bs-light","#121212"),document.documentElement.style.setProperty("--bs-dark","rgba(255, 255, 255, 0.8)"),document.documentElement.classList.add("dark-mode"),""):void 0},themeColor:function(obj){switch(obj){case"primary":document.documentElement.style.setProperty("--bs-primary","#0d6efd"),document.documentElement.style.setProperty("--bs-primary_opacity_1","rgba(13, 110, 253, 0.1)"),document.documentElement.style.setProperty("--bs-primary_opacity_2","rgba(13, 110, 253, 0.2)"),document.documentElement.style.setProperty("--bs-primary_opacity_3","rgba(13, 110, 253, 0.3)"),document.documentElement.style.setProperty("--bs-primary_opacity_4","rgba(13, 110, 253, 0.4)"),document.documentElement.style.setProperty("--bs-primary_opacity_5","rgba(13, 110, 253, 0.5)"),document.documentElement.style.setProperty("--bs-primary_opacity_6","rgba(13, 110, 253, 0.6)"),document.documentElement.style.setProperty("--bs-primary_opacity_7","rgba(13, 110, 253, 0.7)"),document.documentElement.style.setProperty("--bs-primary_opacity_8","rgba(13, 110, 253, 0.8)"),document.documentElement.style.setProperty("--bs-primary_opacity_9","rgba(13, 110, 253, 0.9)"),Cookies.set("themeColor","primary",{expires:3});break;case"danger":document.documentElement.style.setProperty("--bs-primary","#dc3545"),document.documentElement.style.setProperty("--bs-primary_opacity_1","rgba(220, 53, 69, 0.1)"),document.documentElement.style.setProperty("--bs-primary_opacity_2","rgba(220, 53, 69, 0.2)"),document.documentElement.style.setProperty("--bs-primary_opacity_3","rgba(220, 53, 69, 0.3)"),document.documentElement.style.setProperty("--bs-primary_opacity_4","rgba(220, 53, 69, 0.4)"),document.documentElement.style.setProperty("--bs-primary_opacity_5","rgba(220, 53, 69, 0.5)"),document.documentElement.style.setProperty("--bs-primary_opacity_6","rgba(220, 53, 69, 0.6)"),document.documentElement.style.setProperty("--bs-primary_opacity_7","rgba(220, 53, 69, 0.7)"),document.documentElement.style.setProperty("--bs-primary_opacity_8","rgba(220, 53, 69, 0.8)"),document.documentElement.style.setProperty("--bs-primary_opacity_9","rgba(220, 53, 69, 0.9)"),Cookies.set("themeColor","danger",{expires:3});break;case"info":document.documentElement.style.setProperty("--bs-primary","#17a2b8"),document.documentElement.style.setProperty("--bs-primary_opacity_1","rgba(23, 162, 184, 0.1)"),document.documentElement.style.setProperty("--bs-primary_opacity_2","rgba(23, 162, 184, 0.2)"),document.documentElement.style.setProperty("--bs-primary_opacity_3","rgba(23, 162, 184, 0.3)"),document.documentElement.style.setProperty("--bs-primary_opacity_4","rgba(23, 162, 184, 0.4)"),document.documentElement.style.setProperty("--bs-primary_opacity_5","rgba(23, 162, 184, 0.5)"),document.documentElement.style.setProperty("--bs-primary_opacity_6","rgba(23, 162, 184, 0.6)"),document.documentElement.style.setProperty("--bs-primary_opacity_7","rgba(23, 162, 184, 0.7)"),document.documentElement.style.setProperty("--bs-primary_opacity_8","rgba(23, 162, 184, 0.8)"),document.documentElement.style.setProperty("--bs-primary_opacity_9","rgba(23, 162, 184, 0.9)"),Cookies.set("themeColor","info",{expires:3});break;case"success":document.documentElement.style.setProperty("--bs-primary","#28a745"),document.documentElement.style.setProperty("--bs-primary_opacity_1","rgba(40, 167, 69, 0.1)"),document.documentElement.style.setProperty("--bs-primary_opacity_2","rgba(40, 167, 69, 0.2)"),document.documentElement.style.setProperty("--bs-primary_opacity_3","rgba(40, 167, 69, 0.3)"),document.documentElement.style.setProperty("--bs-primary_opacity_4","rgba(40, 167, 69, 0.4)"),document.documentElement.style.setProperty("--bs-primary_opacity_5","rgba(40, 167, 69, 0.5)"),document.documentElement.style.setProperty("--bs-primary_opacity_6","rgba(40, 167, 69, 0.6)"),document.documentElement.style.setProperty("--bs-primary_opacity_7","rgba(40, 167, 69, 0.7)"),document.documentElement.style.setProperty("--bs-primary_opacity_8","rgba(40, 167, 69, 0.8)"),document.documentElement.style.setProperty("--bs-primary_opacity_9","rgba(40, 167, 69, 0.9)"),Cookies.set("themeColor","success",{expires:3});break;case"warning":document.documentElement.style.setProperty("--bs-primary","#ffc107"),document.documentElement.style.setProperty("--bs-primary_opacity_1","rgba(255, 193, 7, 0.1)"),document.documentElement.style.setProperty("--bs-primary_opacity_2","rgba(255, 193, 7, 0.2)"),document.documentElement.style.setProperty("--bs-primary_opacity_3","rgba(255, 193, 7, 0.3)"),document.documentElement.style.setProperty("--bs-primary_opacity_4","rgba(255, 193, 7, 0.4)"),document.documentElement.style.setProperty("--bs-primary_opacity_5","rgba(255, 193, 7, 0.5)"),document.documentElement.style.setProperty("--bs-primary_opacity_6","rgba(255, 193, 7, 0.6)"),document.documentElement.style.setProperty("--bs-primary_opacity_7","rgba(255, 193, 7, 0.7)"),document.documentElement.style.setProperty("--bs-primary_opacity_8","rgba(255, 193, 7, 0.8)"),document.documentElement.style.setProperty("--bs-primary_opacity_9","rgba(255, 193, 7, 0.9)"),Cookies.set("themeColor","warning",{expires:3})}},themeColorCheck:function(){const themeColor=Cookies.get("themeColor");console.log(themeColor),"primary"===themeColor?(this.themeColor("primary"),document.querySelector('.btn-check[value="primary"]').setAttribute("checked","checked")):"warning"===themeColor?(this.themeColor("warning"),document.querySelector('.btn-check[value="warning"]').setAttribute("checked","checked")):"success"===themeColor?(this.themeColor("success"),document.querySelector('.btn-check[value="success"]').setAttribute("checked","checked")):"info"===themeColor?(document.querySelector('.btn-check[value="info"]').setAttribute("checked","checked"),this.themeColor("info")):"danger"===themeColor&&(this.themeColor("danger"),document.querySelector('.btn-check[value="danger"]').setAttribute("checked","checked"))}};function PjaxLoad(){Cuteen.initTheme(),Cuteen.darkModeCheck(),Cuteen.mobileAside(),Cuteen.mobileMusicToggle(),Cuteen.tocDisplay(),Cuteen.noCopy(),Cuteen.codeLight(),Cuteen.InitOwO()}document.addEventListener("DOMContentLoaded",function(event){Cuteen.themeColorCheck(),PjaxLoad()}),window.onscroll=function(){Cuteen.navBar()};