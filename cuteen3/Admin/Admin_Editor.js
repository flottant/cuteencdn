function insertAtCursor(t,e){var n=t.scrollTop,o=document.documentElement.scrollTop;if(document.selection){t.focus();var s=document.selection.createRange();s.text=e,s.select()}else if(t.selectionStart||"0"==t.selectionStart){var l=t.selectionStart,c=t.selectionEnd;t.value=t.value.substring(0,l)+e+t.value.substring(c,t.value.length),t.focus(),t.selectionStart=l+e.length,t.selectionEnd=l+e.length}else t.value+=e,t.focus();t.scrollTop=n,document.documentElement.scrollTop=o}function inserContentToTextArea(myField,textContent,modelId){if($(modelId).remove(),document.selection)myField.focus(),document.selection.createRange().text=textContent,myField.focus();else if(myField.selectionStart||"0"==myField.selectionStart){var startPos=myField.selectionStart,endPos=myField.selectionEnd,cursorPos=startPos;myField.value=myField.value.substring(0,startPos)+textContent+myField.value.substring(endPos,myField.value.length),cursorPos+=textContent.length,myField.selectionStart=cursorPos,myField.selectionEnd=cursorPos,myField.focus()}else myField.value+=textContent,myField.focus()}window.onload=function(){$(document).ready(function(){$("#wmd-button-row").length>0&&($("#wmd-button-row").append('<li class="wmd-spacer wmd-spacer1"></li><li class="wmd-button" id="wmd-photoset-button" style="" title="插入选项卡"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-chanpinxuanxiangka"></use></svg></li><li class="wmd-button OwO" id="wmd-owo-button" style="" title="插入表情"></li><li class="wmd-button" id="wmd-bvid-button" style="" title="插入Bilibili视频"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-bilibili-"></use></svg></li><li class="wmd-button" id="wmd-acc-button" style="" title="插入多彩折叠面板"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-caidan-zhankai"></use></svg></li><li class="wmd-button" id="wmd-button-button" style="" title="插入多彩按钮"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-anniu1"></use></svg></li><li class="wmd-button" id="wmd-bar-button" style="" title="插入多彩信息条"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-icontiaoxingtu"></use></svg></li><li class="wmd-button" id="wmd-mes-button" style="" title="插入多彩信息面板"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-__zongkongmianban"></use></svg></li><li class="wmd-button" id="wmd-pro-button" style="" title="插入多彩进度条"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-C32"></use></svg></li><li class="wmd-button" id="wmd-pic-button" style="" title="插入画廊"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-tupian"></use></svg></li><li class="wmd-button" id="wmd-tex-button" style="" title="插入特殊文字效果"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-wenzi"></use></svg></li><li class="wmd-button" id="wmd-fri-button" style="" title="插入友情链接"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-duoren-lan"></use></svg></li><li class="wmd-button" id="wmd-vid-button" style="" title="插入直链视频"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-shipin"></use></svg></li><li class="wmd-button" id="wmd-aud-button" style="" title="插入直链音频"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-moren_yinle"></use></svg></li><li class="wmd-spacer wmd-spacer1"></li><style>.wmd-button-row{height: 100%!important;}</style>'),new OwO({logo:"OωO",container:document.getElementsByClassName("OwO")[0],target:document.getElementById("text"),api:CUTEEN_SETTING.STATIC_PATH+"/Func/OwO/OwO.json",position:"down",width:"400px",maxHeight:"220px"}),$(document).on("click","#wmd-fri-button",function(){$("body").append('<div id="friPanel"><div class="wmd-prompt-background" style="position: fixed; top: 0px; z-index: 1000; opacity: 0.5; height: 100%; left: 0px; width: 100%;"></div><div class="wmd-prompt-dialog"><div><p style="color:red">请在友情链接页面使用本短代码</p><p><b>插入友链</b></p><p>基本</p><p><input type="text" name="zdmc" placeholder="站点名称"></input><input type="text" name="zdlj" placeholder="站点链接"></input><input type="text" name="txlj" placeholder="站点头像链接"></input><input type="text" name="zdms" placeholder="站点描述"></input></p><p><labe>加载基本框架</labe></p><p><select id="ylkj"><option value="bjzkj">否</option><option value="jzkj">是</option></select></div><form><button type="button" class="btn btn-s primary" id="fri_ok">确定</button><button type="button" class="btn btn-s" id="fri_cancel">取消</button></form></div></div>'),$(".wmd-prompt-dialog input").select()}),$(document).on("click","#wmd-tex-button",function(){$("body").append('<div id="texPanel"><div class="wmd-prompt-background" style="position: fixed; top: 0px; z-index: 1000; opacity: 0.5; height: 100%; left: 0px; width: 100%;"></div><div class="wmd-prompt-dialog"><div><p><b>插入特殊文字</b></p><p>样式选择</p><p><select id="wzlxxz"><option value="dheimu">黑幕</option><option value="ggl">刮刮乐</option><option value="xlch">绚丽彩虹</option></select><p><labe>输入文字</labe></p><p><input type="text" name="txwzsr" placeholder="输入需要加入特效的文字"></input></p></div><form><button type="button" class="btn btn-s primary" id="tex_ok">确定</button><button type="button" class="btn btn-s" id="tex_cancel">取消</button></form></div></div>'),$(".wmd-prompt-dialog input").select()}),$(document).on("click","#wmd-bvid-button",function(){$("body").append('<div id="bvidPanel"><div class="wmd-prompt-background" style="position: fixed; top: 0px; z-index: 1000; opacity: 0.5; height: 100%; left: 0px; width: 100%;"></div><div class="wmd-prompt-dialog"><div><p><b>插入bilibili视频</b></p><p>输入嵌入代码</p><p><input type="text" name="bvid" placeholder="整个iframe标签"></input></p></div><form><button type="button" class="btn btn-s primary" id="bvid_ok">确定</button><button type="button" class="btn btn-s" id="bvid_cancel">取消</button></form></div></div>'),$(".wmd-prompt-dialog input").select()}),$(document).on("click","#wmd-button-button",function(){$("body").append('<div id="buttonPanel"><div class="wmd-prompt-background" style="position: fixed; top: 0px; z-index: 1000; opacity: 0.5; height: 100%; left: 0px; width: 100%;"></div><div class="wmd-prompt-dialog"><div><p><b>插入按钮</b></p><p>基本</p><p><input type="text" name="te" placeholder="内容"></input><input type="text" name="url" placeholder="链接"></input></p><p><labe>样式</labe></p><p><select id="co"><option value="info">蓝色</option><option value="download">下载按钮</option><option value="success">绿色</option><option value="black">紫色</option><option value="warning">黄色</option><option value="danger">红色</option></select></div><form><button type="button" class="btn btn-s primary" id="button_ok">确定</button><button type="button" class="btn btn-s" id="button_cancel">取消</button></form></div></div>'),$(".wmd-prompt-dialog input").select()}),$(document).on("click","#wmd-bar-button",function(){$("body").append('<div id="barPanel"><div class="wmd-prompt-background" style="position: fixed; top: 0px; z-index: 1000; opacity: 0.5; height: 100%; left: 0px; width: 100%;"></div><div class="wmd-prompt-dialog"><div><p><b>插入信息条</b></p><p>输入内容</p><p><textarea name="bar6" style="width: 100%; height: 100px"></textarea></p><p><labe>选择样式</labe></p><p><select id="co"><option value="gbar">绿色</option><option value="ybar">黄色</option><option value="rbar">红色</option><option value="bbar">蓝色</option><option value="pbar">紫色</option></select></div><form><button type="button" class="btn btn-s primary" id="bar_ok">确定</button><button type="button" class="btn btn-s" id="bar_cancel">取消</button></form></div></div>'),$(".wmd-prompt-dialog input").select()}),$(document).on("click","#wmd-pro-button",function(){$("body").append('<div id="proPanel"><div class="wmd-prompt-background" style="position: fixed; top: 0px; z-index: 1000; opacity: 0.5; height: 100%; left: 0px; width: 100%;"></div><div class="wmd-prompt-dialog"><div><p><b>插入进度条</b></p><p>输入进度（范围：0~100数字）</p><p><input type="text" name="pro5" placeholder="输入0~100数字，留空则为未定义滚动"></input></p><p><labe>选择样式</labe></p><p><select id="co"><option value="gpro">绿色</option><option value="ypro">黄色</option><option value="rpro">红色</option><option value="bpro">蓝色</option><option value="ppro">紫色</option></select></div><form><button type="button" class="btn btn-s primary" id="pro_ok">确定</button><button type="button" class="btn btn-s" id="pro_cancel">取消</button></form></div></div>'),$(".wmd-prompt-dialog input").select()}),$(document).on("click","#wmd-mes-button",function(){$("body").append('<div id="mesPanel"><div class="wmd-prompt-background" style="position: fixed; top: 0px; z-index: 1000; opacity: 0.5; height: 100%; left: 0px; width: 100%;"></div><div class="wmd-prompt-dialog"><div><p><b>插入信息面板</b></p><p>输入标题</p><p><input type="text" name="mes5" placeholder="标题"></input></p><p>输入内容</p><p><textarea name="mes6" style="width: 100%; height: 100px"></textarea></p><p><labe>选择样式</labe></p><p><select id="co"><option value="bmes">蓝色</option><option value="gmes">绿色</option><option value="ymes">黄色</option><option value="rmes">红色</option><option value="pmes">紫色</option></select></div><form><button type="button" class="btn btn-s primary" id="mes_ok">确定</button><button type="button" class="btn btn-s" id="mes_cancel">取消</button></form></div></div>'),$(".wmd-prompt-dialog input").select()}),$(document).on("click","#wmd-acc-button",function(){$("body").append('<div id="accPanel"><div class="wmd-prompt-background" style="position: fixed; top: 0px; z-index: 1000; opacity: 0.5; height: 100%; left: 0px; width: 100%;"></div><div class="wmd-prompt-dialog"><div><p><b>插入信息面板</b></p><p>输入标题</p><p><input type="text" name="acc5" placeholder="标题"></input></p><p>输入内容</p><p><textarea name="acc6" style="width: 100%; height: 100px"></textarea></p><p><labe>选择样式</labe></p><p><select id="co"><option value="bacc">蓝色</option><option value="gacc">绿色</option><option value="yacc">黄色</option><option value="racc">红色</option><option value="pacc">紫色</option></select></p><p><labe>是否展开</labe></p><p><select id="co1"><option value="guanacc">关闭</option><option value="zhanacc">展开</option></select></p></div><form><button type="button" class="btn btn-s primary" id="acc_ok">确定</button><button type="button" class="btn btn-s" id="acc_cancel">取消</button></form></div></div>'),$(".wmd-prompt-dialog input").select()}),$(document).on("click","#wmd-vid-button",function(){$("body").append('<div id="vidPanel"><div class="wmd-prompt-background" style="position: fixed; top: 0px; z-index: 1000; opacity: 0.5; height: 100%; left: 0px; width: 100%;"></div><div class="wmd-prompt-dialog"><div><p><b>插入视频</b></p><p style="color:red">支持Ogg、Mp4、WebM三种格式</p><p>输入直链</p><p><input type="text" name="vid5" placeholder="/xxxx.mp4"></input></p></div><form><button type="button" class="btn btn-s primary" id="vid_ok">确定</button><button type="button" class="btn btn-s" id="vid_cancel">取消</button></form></div></div>'),$(".wmd-prompt-dialog input").select()}),$(document).on("click","#wmd-aud-button",function(){$("body").append('<div id="audPanel"><div class="wmd-prompt-background" style="position: fixed; top: 0px; z-index: 1000; opacity: 0.5; height: 100%; left: 0px; width: 100%;"></div><div class="wmd-prompt-dialog"><div><p><b>插入音频</b></p><p style="color:red">支持wav、mp3、ogg三种格式</p><p>输入直链</p><p><input type="text" name="aud5" placeholder="/xxxx.mp3"></input></p></div><form><button type="button" class="btn btn-s primary" id="aud_ok">确定</button><button type="button" class="btn btn-s" id="aud_cancel">取消</button></form></div></div>'),$(".wmd-prompt-dialog input").select()}),$(document).on("click","#tex_cancel",function(){$("#texPanel").remove(),$("#wmd-editarea textarea").focus()}),$(document).on("click","#fri_cancel",function(){$("#friPanel").remove(),$("#wmd-editarea textarea").focus()}),$(document).on("click","#button_cancel",function(){$("#buttonPanel").remove(),$("#wmd-editarea textarea").focus()}),$(document).on("click","#bar_cancel",function(){$("#barPanel").remove(),$("#wmd-editarea textarea").focus()}),$(document).on("click","#mes_cancel",function(){$("#mesPanel").remove(),$("#wmd-editarea textarea").focus()}),$(document).on("click","#vid_cancel",function(){$("#vidPanel").remove(),$("#wmd-editarea textarea").focus()}),$(document).on("click","#aud_cancel",function(){$("#audPanel").remove(),$("#wmd-editarea textarea").focus()}),$(document).on("click","#acc_cancel",function(){$("#accPanel").remove(),$("#wmd-editarea textarea").focus()}),$(document).on("click","#pro_cancel",function(){$("#proPanel").remove(),$("#wmd-editarea textarea").focus()}),$(document).on("click","#bvid_cancel",function(){$("#bvidPanel").remove(),$("#wmd-editarea textarea").focus()}),$(document).on("click","#bvid_ok",function(){var bvid=$('.wmd-prompt-dialog input[name="bvid"]').val();textContent="[BiliVideo]"+bvid+"[/BiliVideo]",myField=document.getElementById("text"),inserContentToTextArea(myField,textContent,"#bvidPanel")}),$(document).on("click","#button_ok",function(){var textContent=$('.wmd-prompt-dialog input[name="te"]').val(),obj_co=document.getElementById("co"),index_co=obj_co.selectedIndex,color=obj_co.options[index_co].value,url=$('.wmd-prompt-dialog input[name="url"]').val();"info"==color?textContent='[btnblue href="'+url+'" target="blank"]'+textContent+"[/btnblue]":"success"==color?textContent='[btngreen href="'+url+'" target="blank"]'+textContent+"[/btngreen]":"black"==color?textContent='[btnblack href="'+url+'" target="blank"]'+textContent+"[/btnblack]":"warning"==color?textContent='[btnyellow href="'+url+'" target="blank"]'+textContent+"[/btnyellow]":"danger"==color?textContent='[btnred href="'+url+'" target="blank"]'+textContent+"[/btnred]":"download"==color&&(textContent='[download href="'+url+'" target="blank"]'+textContent+"[/download]"),myField=document.getElementById("text"),inserContentToTextArea(myField,textContent,"#buttonPanel")}),$(document).on("click","#tex_ok",function(){var txwzsr=$('.wmd-prompt-dialog input[name="txwzsr"]').val(),obj_co=document.getElementById("wzlxxz"),index_co=obj_co.selectedIndex,color=obj_co.options[index_co].value;"dheimu"==color?textContent="[DarkBText]"+txwzsr+"[/DarkBText]":"ggl"==color?textContent="[BlurText]"+txwzsr+"[/BlurText]":"xlch"==color&&(textContent="[RainBowText]"+txwzsr+"[/RainBowText]"),myField=document.getElementById("text"),inserContentToTextArea(myField,textContent,"#texPanel")}),$(document).on("click","#fri_ok",function(){var zdmc=$('.wmd-prompt-dialog input[name="zdmc"]').val(),zdlj=$('.wmd-prompt-dialog input[name="zdlj"]').val(),txlj=$('.wmd-prompt-dialog input[name="txlj"]').val(),zdms=$('.wmd-prompt-dialog input[name="zdms"]').val(),obj_co=document.getElementById("ylkj"),index_co=obj_co.selectedIndex,color=obj_co.options[index_co].value;"bjzkj"==color?textContent='[link img="'+txlj+'" href="'+zdlj+'" title="'+zdms+'"]'+zdmc+"[/link]":"jzkj"==color&&(textContent='[friends random="false"]\n[link img="'+txlj+'" href="'+zdlj+'" title="'+zdms+'"]'+zdmc+"[/link]\n\n[/friends]"),myField=document.getElementById("text"),inserContentToTextArea(myField,textContent,"#friPanel")}),$(document).on("click","#bar_ok",function(){var textContent=$(".wmd-prompt-dialog textarea[name=bar6]").val(),obj_co=document.getElementById("co"),index_co=obj_co.selectedIndex,color=obj_co.options[index_co].value;"rbar"==color?textContent="[redbar]"+textContent+"[/redbar]":"gbar"==color?textContent="[greenbar]"+textContent+"[/greenbar]":"ybar"==color?textContent="[yellowbar]"+textContent+"[/yellowbar]":"bbar"==color?textContent="[bluebar]"+textContent+"[/bluebar]":"pbar"==color&&(textContent="[purplebar]"+textContent+"[/purplebar]"),myField=document.getElementById("text"),inserContentToTextArea(myField,textContent,"#barPanel")}),$(document).on("click","#pro_ok",function(){var textContent=$(".wmd-prompt-dialog input[name=pro5]").val(),obj_co=document.getElementById("co"),index_co=obj_co.selectedIndex,color=obj_co.options[index_co].value;"rpro"==color?textContent='[redpro value="'+textContent+'"]PROGRESS[/redpro]':"gpro"==color?textContent='[greenpro value="'+textContent+'"]PROGRESS[/greenpro]':"ypro"==color?textContent='[yellowpro value="'+textContent+'"]PROGRESS[/yellowpro]':"bpro"==color?textContent='[bluepro value="'+textContent+'"]PROGRESS[/bluepro]':"ppro"==color&&(textContent='[purplepro value="'+textContent+'"]PROGRESS[/purplepro]'),myField=document.getElementById("text"),inserContentToTextArea(myField,textContent,"#proPanel")}),$(document).on("click","#mes_ok",function(){var textContent=$(".wmd-prompt-dialog textarea[name=mes6]").val(),obj_co=document.getElementById("co"),index_co=obj_co.selectedIndex,color=obj_co.options[index_co].value,tit=$('.wmd-prompt-dialog input[name="mes5"]').val();"rmes"==color?textContent='[redinfo title="'+tit+'"]'+textContent+"[/redinfo]":"gmes"==color?textContent='[greeninfo title="'+tit+'"]'+textContent+"[/greeninfo]":"bmes"==color?textContent='[blueinfo title="'+tit+'"]'+textContent+"[/blueinfo]":"ymes"==color?textContent='[yellowinfo title="'+tit+'"]'+textContent+"[/yellowinfo]":"pmes"==color&&(textContent='[purpleinfo title="'+tit+'"]'+textContent+"[/purpleinfo]"),myField=document.getElementById("text"),inserContentToTextArea(myField,textContent,"#mesPanel")}),$(document).on("click","#acc_ok",function(){var textContent=$(".wmd-prompt-dialog textarea[name=acc6]").val(),obj_co=document.getElementById("co"),index_co=obj_co.selectedIndex,color=obj_co.options[index_co].value,obj_co1=document.getElementById("co1"),index_co1=obj_co1.selectedIndex,open=obj_co1.options[index_co1].value,tit=$('.wmd-prompt-dialog input[name="acc5"]').val();"guanacc"==open?"racc"==color?textContent='[redacc open="" title="'+tit+'"]'+textContent+"[/redacc]":"gacc"==color?textContent='[greenacc open="" title="'+tit+'"]'+textContent+"[/greenacc]":"bacc"==color?textContent='[blueacc open="" title="'+tit+'"]'+textContent+"[/blueacc]":"yacc"==color?textContent='[yellowacc open="" title="'+tit+'"]'+textContent+"[/yellowacc]":"pacc"==color&&(textContent='[purpleacc open="" title="'+tit+'"]'+textContent+"[/purpleacc]"):"zhanacc"==open&&("racc"==color?textContent='[redacc open="open" title="'+tit+'"]'+textContent+"[/redacc]":"gacc"==color?textContent='[greenacc open="open" title="'+tit+'"]'+textContent+"[/greenacc]":"bacc"==color?textContent='[blueacc open="open" title="'+tit+'"]'+textContent+"[/blueacc]":"yacc"==color?textContent='[yellowacc open="open" title="'+tit+'"]'+textContent+"[/yellowacc]":"pacc"==color&&(textContent='[purpleacc open="open" title="'+tit+'"]'+textContent+"[/purpleacc]")),myField=document.getElementById("text"),inserContentToTextArea(myField,textContent,"#accPanel")}),$(document).on("click","#vid_ok",function(){var tit5=$('.wmd-prompt-dialog input[name="vid5"]').val();textContent='[video src="'+tit5+'" preload="metadata" width="100%" height="auto" ]视频[/video]',myField=document.getElementById("text"),inserContentToTextArea(myField,textContent,"#vidPanel")}),$(document).on("click","#aud_ok",function(){var tit51=$('.wmd-prompt-dialog input[name="aud5"]').val();textContent='[audio src="'+tit51+'" preload="metadata" autoplay="autoplay" loop="loop"]音频[/audio]',myField=document.getElementById("text"),inserContentToTextArea(myField,textContent,"#audPanel")}),$(document).on("click","#wmd-photoset-button",function(){myField=document.getElementById("text"),insertAtCursor(myField,'\n[tabs]\n[item title="标题一"]这里替换内容[/item]\n[item title="标题二"]这里替换内容[/item]\n[/tabs]\n')}),$(document).on("click","#wmd-pic-button",function(){myField=document.getElementById("text"),insertAtCursor(myField,"\n[photos]\n这里替换您的图片链接（markdown格式）\n[/photos]")}))})};